<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Prototype with Audio</title>
    <meta name="description" content="Hello, WebVR! - A-Frame">
    <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-animation-component/dist/aframe-animation-component.min.js"></script>
    <script>
      AFRAME.registerComponent('cursor-listener', {
        init: function () {

          this.el.addEventListener('click', function (evt) {
            console.log(this.id);
            if (this.id === 'gracebox') {
              console.log("Box triggered");
              this.setAttribute('sound', { src: '#grace' });
            }
          })
        }
      })
    </script>

  </head>
  <body>
    <a-scene antialias="true">
      <a-assets>
        <audio id="click-sound" crossorigin="anonymous" src="https://cdn.aframe.io/360-image-gallery-boilerplate/audio/click.ogg"></audio>
        <audio id="grace" crossorigin="anonymous" src="https://ucarecdn.com/e8a6d5dd-4241-44ce-8770-426bb8b36911/"></audio>
      </a-assets>

      <a-box
        id="gracebox"
        src="images/grace.jpg"
        scale="1 1 0"
        cursor-listener
        sound="on: click; src: #click-sound"
        shader="flat"
        shadow>
        <a-animation attribute="position"
                     from="-1.5 2.6 -3"
                     to="-1.5 2.7 -3"
                     repeat="indefinite"
                     direction="alternate">
        </a-animation>
      </a-box>

      <a-entity
        geometry="primitive:plane;height:10000;width:10000"
        rotation="-90 0 0"
        material="transparent:true;repeat:10000 10000;metalness:0.6;roughness:0.4;sphericalEnvMap:https://img.gs/bbdkhfbzkk/2048x2048,stretch/http://i.imgur.com/WqlqEkq.jpg;src:https://img.gs/bbdkhfbzkk/stretch/https://i.imgur.com/25P1geh.png"
        position="">
      </a-entity>

      <a-sky color="black"></a-sky>

      <a-camera>
        <a-cursor color="white">
        </a-cursor>
      </a-camera>

      <a-entity id="cyl"
        position="1.5 2.5 -3"
        geometry="radius:0.12; height:4; primitive:cylinder"
        material="color:#fff9fe">
      </a-entity>
      <a-entity
        id="schild"
        position="2.200 2 -2.530"
        rotation="0 -40 0"
        scale="1.6 0.5 0.1"
        geometry="primitive:box"
        material="src:images/schild1.png;">
      </a-entity>

      <a-entity
        id="schild2"
        position="0.630 2.843 -2.829"
        rotation="0 10 0"
        scale="1.6 0.5 0.1"
        geometry="primitive:box"
        material="src:images/schild1.png;">
      </a-entity>


    </a-scene>
  </body>
</html>
